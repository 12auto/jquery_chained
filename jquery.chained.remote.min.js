/*! Chained 2.0.0-beta.3 - MIT license - Copyright 2010-2017 Mika Tuupola */

!function(a,b,c,d){"use strict";a.fn.remoteChained=function(b){var c=a.extend({},a.fn.remoteChained.defaults,b);return c.loading&&(c.clear=!0),this.each(function(){function b(b){b.done(function(b){b=c.data.call(e,b),d.call(e,b),a(e).trigger("change")})}function d(b){var d=a(":selected",e).val();a("option",e).remove(),a.isArray(b)?a.each(b,function(b,c){a.each(c,function(b,c){if("selected"===b)d=c;else{var f=a("<option />").val(b).append(c);a(e).append(f)}})}):a.each(b,function(c,f){if(b.hasOwnProperty(c))if("selected"===c)d=f;else{var g=a("<option />").val(c).append(f);a(e).append(g)}}),a(e).children().each(function(){a(this).val()===d+""&&a(this).attr("selected","selected")}),1===a("option",e).length&&""===a(e).val()?a(e).prop("disabled",!0):a(e).prop("disabled",!1),a.isFunction(c.onUpdated)&&c.onUpdated.call(e)}var e=this,f=!1;a(c.parents).each(function(){if(a(this).bind("change",function(){var g={};a(c.parents).each(function(){var b=a(this).attr(c.attribute),d=(a(this).is("select")?a(":selected",this):a(this)).val();g[b]=d,c.depends&&a(c.depends).each(function(){if(e!==this){var b=a(this).attr(c.attribute),d=a(this).val();g[b]=d}})}),f&&a.isFunction(f.abort)&&(f.abort(),f=!1),c.clear&&(c.loading?d.call(e,{"":c.loading}):a("option",e).remove(),a(e).trigger("change"));var h;a.isFunction(c.makeDeferredRequest)?f=h=c.makeDeferredRequest.call(e,c,g):h=jQuery.Deferred().resolve(g),b(h)}),c.bootstrap){var g;a.isFunction(c.bootstrap)?g=c.bootstrap.call(e):(g=c.bootstrap,c.bootstrap=null),d.call(e,g)}})})},a.fn.remoteChainedTo=a.fn.remoteChained,a.fn.remoteChained.defaults={attribute:"name",depends:null,bootstrap:null,loading:null,clear:!1,makeDeferredRequest:function(b,c){return a.getJSON(b.url,c)},onUpdated:null,data:function(a){return a}}}(window.jQuery||window.Zepto,window,document);